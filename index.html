<!doctype html>
<html lang="ar">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ุงุฎุชุจุงุฑ ููููุงุก - ููุงุณ ุงููุงุฏุฉ (50 ุฏูููุฉ)</title>
<style>
  :root{--main:#0b79d0;--ok:#1b9a3b;--bad:#d9534f}
  body{font-family:Arial, sans-serif;direction:rtl;text-align:right;background:#f5f7fa;margin:0;padding:18px}
  .wrap{max-width:1000px;margin:0 auto;background:#fff;padding:20px;border-radius:10px;box-shadow:0 6px 20px rgba(10,20,30,0.06)}
  h1{margin:0 0 6px;color:var(--main)}
  .small{color:#555;font-size:14px}
  label{display:block;margin-bottom:6px}
  input[type="text"],select{padding:10px;width:100%;box-sizing:border-box;border-radius:6px;border:1px solid #ccc}
  .btn{display:inline-block;padding:10px 14px;border-radius:8px;background:var(--main);color:#fff;border:none;cursor:pointer}
  .btn.warn{background:#ff7043}
  .timer{font-weight:700;margin:10px 0;font-size:18px}
  .q{margin:14px 0;padding:12px;border-radius:8px;border:1px solid #eef3f8;background:#fff}
  .choices label{display:block;margin:8px 0;cursor:pointer}
  .hidden{display:none}
  .result{margin-top:12px;padding:12px;border-radius:8px;background:#fbfdfe}
  .correct{color:var(--ok);font-weight:700}
  .wrong{color:var(--bad);font-weight:700}
  .key-row{padding:8px;border-bottom:1px solid #f1f3f6}
  .actions{margin-top:12px}
  .download-btn{background:#00a86b;margin-left:8px}
  footer{margin-top:14px;color:#888;font-size:13px}
</style>
</head>
<body>
  <div class="wrap">
    <!-- Page 1: student data -->
    <div id="page-student">
      <h1>๐ ุจูุงูุงุช ุงูุทุงูุจ</h1>
      <p class="small">ุงูุชุจ ุงุณูู ูุงุฎุชุฑ ุงูุดุนุจุฉ ุซู ุงุถุบุท "ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ". ุณูุจุฏุฃ ุงููุคูุช (50 ุฏูููุฉ) ุนูุฏ ุงูุถุบุท.</p>
      <div style="margin-top:12px">
        <label>ุงูุงุณู:</label>
        <input id="student-name" type="text" placeholder="ูุซุงู: ูุญูุฏ ุงูุนูู">
      </div>
      <div style="margin-top:12px">
        <label>ุงูุดุนุจุฉ:</label>
        <select id="student-class">
          <option value="">ุงุฎุชุฑ ุงูุดุนุจุฉ</option>
          <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option>
        </select>
      </div>
      <div style="margin-top:14px">
        <button id="start-btn" class="btn">ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ</button>
      </div>
    </div>

    <!-- Page 2: quiz -->
    <div id="page-quiz" class="hidden">
      <h1>๐งช ุงุฎุชุจุงุฑ ููููุงุก - ุฃูู ุซุงููู</h1>
      <p class="small">ุงูุจุงุจ ุงูุฎุงูุณ: ููุงุณ ุงููุงุฏุฉ โ ุงููุชูุฉ ูุงูููู</p>
      <div class="timer">โฐ ุงูููุช ุงููุชุจูู: <span id="time">50:00</span></div>
      <div id="quiz"></div>
      <div class="actions">
        <button id="submit" class="btn">ุชูููู ุงูุงุฎุชุจุงุฑ</button>
        <button id="finish-early" class="btn warn">ุฅููุงุก ุณุฑูุน</button>
      </div>
    </div>

    <!-- Page 3: result -->
    <div id="page-result" class="hidden">
      <h1>๐ ูุชูุฌุฉ ุงูุงุฎุชุจุงุฑ</h1>
      <div id="student-info" class="small"></div>
      <div id="score" class="result"></div>
      <div id="details" style="margin-top:12px;border-radius:8px;background:#fbfdfe;padding:8px"></div>
      <div style="margin-top:12px">
        <button id="retry" class="btn">ุฅุนุงุฏุฉ ุงููุญุงููุฉ</button>
        <button id="download" class="btn download-btn">ุชุญููู ุงููุชูุฌุฉ (JSON)</button>
      </div>
    </div>

    <footer>ููู ุงูุงุฎุชุจุงุฑ ูุนูู ูุญูููุง ูุนูู GitHub Pages. ุงูุฃุตูุงุช ุฎูููุฉ ููุถูููุฉ.</footer>
  </div>

<script>
/* ------------------ ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ (30 ุณุคุงู) ------------------ */
const quizData = [
{"q":"ูุง ุงููุญุฏุฉ ุงููุณุชุฎุฏูุฉ ูู ููุงุณ ุงููุชูุฉ ุงูููููุฉุ","choices":["ุงูุฌุฑุงู","ุงูููููุบุฑุงู","ุฌุฑุงู/ููู","ูุชุฑ"],"ans":2},
{"q":"ูุง ุนุฏุฏ ุงูุฌุณููุงุช ูู ููู ูุงุญุฏ ูู ุงููุงุฏุฉุ","choices":["ุนุฏุฏ ุฃููุฌุงุฏุฑู","ุงููุชูุฉ ุงูุฐุฑูุฉ","ุงูุญุฌู ุงููููู","ุงููุฒู ุงูุฐุฑู"],"ans":0},
{"q":"ุฃู ููุง ููู ููุซู ุงููุชูุฉ ุงูููููุฉ ูุบุงุฒ ุซุงูู ุฃูุณูุฏ ุงููุฑุจูู (COโ)ุ","choices":["28 ุฌู/ููู","44 ุฌู/ููู","32 ุฌู/ููู","16 ุฌู/ููู"],"ans":1},
{"q":"ูู ุชุณุงูู ุงููุชูุฉ ุงูููููุฉ ููููุฑูุฏ ุงูุตูุฏููู (NaCl)ุ","choices":["35.5 ุฌู/ููู","58.5 ุฌู/ููู","23 ุฌู/ููู","12.5 ุฌู/ููู"],"ans":1},
{"q":"ุนุฏุฏ ุฃููุฌุงุฏุฑู ูุณุงูู ุชูุฑูุจูุง:","choices":["6.02 ร 10ยฒยณ","3.01 ร 10ยฒยฒ","1.6 ร 10โปยนโน","9.8 ร 10โธ"],"ans":0},
{"q":"ุนูุฏ ููุงุฑูุฉ ุนุฏุฏ ุงูุฐุฑุงุช ูู ููู ูุงุญุฏ ูู ุงููุจุฑูุช ูููู ูุงุญุฏ ูู ุงููุญุงุณ ูุฅู:","choices":["ุนุฏุฏ ุฐุฑุงุช ุงููุญุงุณ ุฃูุซุฑ","ุนุฏุฏ ุฐุฑุงุช ุงููุจุฑูุช ุฃูุซุฑ","ุนุฏุฏ ุงูุฐุฑุงุช ูุชุณุงูู"],"ans":2},
{"q":"ุฅุฐุง ุงุญุชูุช ุนููุฉ ุนูู 0.5 ููู ูู ุงูุญุฏูุฏ (Fe)ุ ููู ุนุฏุฏ ุฐุฑุงุช ุงูุญุฏูุฏ ูููุงุ","choices":["3.01 ร 10ยฒยณ","6.02 ร 10ยฒยณ","1.5 ร 10ยฒโด","9.02 ร 10ยฒยฒ"],"ans":0},
{"q":"ูุง ุงููุชูุฉ ุจุงูุฌุฑุงู ูููู ูุงุญุฏ ูู ุงููุงุฏุฉุ","choices":["ุงููุชูุฉ ุงูููููุฉ","ุนุฏุฏ ุฃููุฌุงุฏุฑู","ุงููุซุงูุฉ","ุงูุญุฌู ุงููููู"],"ans":0},
{"q":"ูู ููููุง ูู ุงูุฃูููููู ูู 5.75ร10ยฒโด ุฐุฑุฉ ูู Alุ","choices":["9.5 ููู","0.1 ููู","5.5 ููู","0.95 ููู"],"ans":0},
{"q":"ุนูุฏ ุงูุชูุงุนู ุจูู ููู ูุงุญุฏ ูู ุงููุญุงุณ ูููู ูุงุญุฏ ูู ุงููุจุฑูุชุ ูุฅู ุนุฏุฏ ุงูุฐุฑุงุช:","choices":["ูุฒุฏุงุฏ","ููู","ูุจูู ูุชุณุงูููุง"],"ans":2},
{"q":"ูุง ุงูููุตูุฏ ุจุงููููุ","choices":["ูุญุฏุฉ ููุงุณ ุงููุชูุฉ ููุท","ูููุฉ ูู ุงููุงุฏุฉ ุชุญุชูู ุนูู ุนุฏุฏ ุฃููุฌุงุฏุฑู ูู ุงูุฌุณููุงุช","ุญุฌู ุงูุบุงุฒ ุนูุฏ ุงูุธุฑูู ุงููุนูุงุฑูุฉ","ูุณุจุฉ ุงููุชูุฉ ุฅูู ุงูุญุฌู"],"ans":1},
{"q":"ุงููุชูุฉ ุงูุฐุฑูุฉ ููุฃูุณุฌูู = 16. ูุง ุงููุชูุฉ ุงูููููุฉ ูููุงุก (HโO)ุ","choices":["18 ุฌู/ููู","18 ุฌู/ููู","20 ุฌู/ููู","14 ุฌู/ููู"],"ans":0},
{"q":"ูุง ุนุฏุฏ ุฐุฑุงุช ุงูููุฏุฑูุฌูู ูู 5 ูููุงุช ูู HโOุ","choices":["5","10","25","15"],"ans":1},
{"q":"ุงููุฑูุจ ุงูุฐู ูุชูุชู ุงูููููุฉ ุชุณุงูู 60 ุฌู/ููู ูู:","choices":["CHโ","CโHโ","CHโCOOH","COโ"],"ans":2},
{"q":"ูุง ุงููุญุฏุฉ ุงูุชู ูููุงุณ ุจูุง ุนุฏุฏ ุงูุฌุณููุงุชุ","choices":["ุงูุฌุฑุงู","ุงูููู","ุงูุฐุฑุฉ","ุงูุฒูุฌ"],"ans":1},
{"q":"ูุง ุงูููุตูุฏ ุจุงููุชูุฉ ุงูููููุฉุ","choices":["ุนุฏุฏ ุงูุฌุณููุงุช ูู ููู ูุงุญุฏ","ูุชูุฉ ููู ูุงุญุฏ ูู ุงููุงุฏุฉ ุจุงูุฌุฑุงู","ุญุฌู ููู ูุงุญุฏ ูู ุงูุบุงุฒ","ุงููุณุจุฉ ุจูู ุงููุชูุฉ ูุงูุญุฌู"],"ans":1},
{"q":"ุฅุฐุง ูุงู ุงูููู ูุญุชูู ุนูู 6.02ร10ยฒยณ ุฐุฑุฉุ ููู ุฐุฑุฉ ูู 2 ูููุ","choices":["1.204ร10ยฒโด","3.01ร10ยฒยณ","6.02ร10ยฒยฒ","2.01ร10ยฒยณ"],"ans":0},
{"q":"ูุง ููุน ุงูุนูุงูุฉ ุจูู ุงููุชูุฉ ูุนุฏุฏ ุงููููุงุชุ","choices":["ุทุฑุฏูุฉ","ุนูุณูุฉ","ุซุงุจุชุฉ","ูุง ุนูุงูุฉ"],"ans":0},
{"q":"ูู ูุชูุฉ ููู ูุงุญุฏ ูู ุงููุฑุจูู (C)ุ","choices":["12 ุฌู","16 ุฌู","14 ุฌู","1 ุฌู"],"ans":0},
{"q":"ุฅุฐุง ูุงู ูุฏูู 3 ููู ูู NaClุ ููู ุนุฏุฏ ุงูุฌุณููุงุช ูููุ","choices":["1.806ร10ยฒโด","6.02ร10ยฒยณ","3.01ร10ยฒยณ","9.8ร10ยฒยฒ"],"ans":0},
{"q":"ูุง ุงูููุตูุฏ ุจุงููุชูุฉ ุงูุฐุฑูุฉ ุงููุณุจูุฉุ","choices":["ูุชูุณุท ูุชู ูุธุงุฆุฑ ุงูุนูุตุฑ ููุงุฑูุฉ ุจุฐุฑุฉ ุงููุฑุจูู-12","ุงููุชูุฉ ุงููููุฉ ููุนูุงุตุฑ","ูุชูุฉ ุงูุฅููุชุฑููุงุช ููุท","ูุฒู ุงูุนูุตุฑ ูู ุงูุทุจูุนุฉ"],"ans":0},
{"q":"ุฅุฐุง ูุงูุช ุงููุชูุฉ ุงูููููุฉ ููNaOH ุชุณุงูู 40 ุฌู/ูููุ ููู ูุชูุฉ 0.5 ููู ูููุ","choices":["20 ุฌู","40 ุฌู","10 ุฌู","80 ุฌู"],"ans":0},
{"q":"ูุง ุงูุฐู ูุฑุจุท ุจูู ุงููุชูุฉ ูุนุฏุฏ ุงูุฌุณููุงุชุ","choices":["ุนุฏุฏ ุงููููุงุช","ุงููุซุงูุฉ","ุงูุญุฌู","ุงูุทุงูุฉ"],"ans":0},
{"q":"ูุง ุญุฌู ุงูุบุงุฒ ุนูุฏ ุงูุธุฑูู ุงููุนูุงุฑูุฉ ููู ูููุ","choices":["22.4 ูุชุฑ","18 ูุชุฑ","12 ูุชุฑ","6 ูุชุฑ"],"ans":0},
{"q":"ูุง ุงูุฐู ูุญุฏุซ ูุนุฏุฏ ุงููููุงุช ุนูุฏูุง ุชุชุถุงุนู ุงููุชูุฉุ","choices":["ูุชุถุงุนู","ููู ูููุตู","ูุจูู ุซุงุจุช","ููุนุฏู"],"ans":0},
{"q":"ูุง ุนุฏุฏ ุงููููุงุช ูู 12 ุฌู ูู ุงููุฑุจูู (C)ุ","choices":["1 ููู","2 ููู","0.5 ููู","6 ููู"],"ans":0},
{"q":"ุงููุชูุฉ ุงูููููุฉ ูููุงุก (HโO) ุชุณุงูู:","choices":["18 ุฌู/ููู","20 ุฌู/ููู","14 ุฌู/ููู","10 ุฌู/ููู"],"ans":0},
{"q":"ุฃู ููุง ููู ููุซู ูุญุฏุฉ ููุงุณ ูููุฉ ุงููุงุฏุฉุ","choices":["ุงูููู","ุงูุฌุฑุงู","ุงููุซุงูุฉ","ุงูุญุฌู"],"ans":0},
{"q":"ุนูุฏ ุงุญุชุฑุงู 2 ููู ูู ุงูููุฏุฑูุฌูู ูุน ุงูุฃูุณุฌูู ููุชุฌ:","choices":["2 ููู ูุงุก","1 ููู ูุงุก","4 ููู ูุงุก","ูุง ุดูุก"],"ans":0},
{"q":"ุฃู ูู ุงูุขุชู ููุซู ุงูุนูุงูุฉ ุงูุตุญูุญุฉ ุจูู ุงููููุงุช ูุงููุชูุฉ ุงูููููุฉุ","choices":["ุนุฏุฏ ุงููููุงุช = ุงููุชูุฉ รท ุงููุชูุฉ ุงูููููุฉ","ุงููุชูุฉ = ุนุฏุฏ ุงููููุงุช รท ุงููุชูุฉ ุงูููููุฉ","ุงููุชูุฉ ุงูููููุฉ = ุงููุชูุฉ ร ุนุฏุฏ ุงููููุงุช","ุฌููุน ูุง ุณุจู"],"ans":0}
];
/* ------------------ ุฅุนุฏุงุฏ ุงูุตูุช (ูุถููู: ูุบูุงุช ุฎูููุฉ) ------------------ */
let audioCtx = null;
function ensureAudioCtx(){
  if(!audioCtx){
    try { audioCtx = new (window.AudioContext || window.webkitAudioContext)(); }
    catch(e){ audioCtx = null; }
  }
}
function playLightTone(type){
  ensureAudioCtx();
  if(!audioCtx) return;
  const now = audioCtx.currentTime;
  const o = audioCtx.createOscillator();
  const g = audioCtx.createGain();
  o.type = 'sine';
  if(type === 'correct'){
    o.frequency.setValueAtTime(880, now); // ูุบูุฉ ุนุงููุฉ ุฎูููุฉ
    g.gain.setValueAtTime(0.02, now);
  } else {
    o.frequency.setValueAtTime(300, now); // ูุบูุฉ ููุฎูุถุฉ ุฎูููุฉ
    g.gain.setValueAtTime(0.02, now);
  }
  o.connect(g); g.connect(audioCtx.destination);
  o.start(now);
  g.gain.exponentialRampToValueAtTime(0.0001, now + 0.12);
  o.stop(now + 0.13);
}

/* ------------------ ูุงุฌูุฉ ุงูุงุฎุชุจุงุฑ ู ุงูููุทู ------------------ */
const TOTAL_SECONDS = 50 * 60;
let remainingSeconds = TOTAL_SECONDS;
let timerInterval = null;

function renderQuiz(){
  const quizDiv = document.getElementById('quiz');
  quizDiv.innerHTML = '';
  quizData.forEach((item, idx) => {
    const qdiv = document.createElement('div');
    qdiv.className = 'q';
    const qtitle = document.createElement('div');
    qtitle.innerHTML = `<strong>ุงูุณุคุงู ${idx+1}:</strong> ${item.q}`;
    qdiv.appendChild(qtitle);
    const choicesDiv = document.createElement('div');
    choicesDiv.className = 'choices';
    item.choices.forEach((ch, j) => {
      const lbl = document.createElement('label');
      lbl.innerHTML = `<input type="radio" name="q${idx}" value="${j}"> ${ch}`;
      lbl.addEventListener('change', () => {
        // ุชุดุบูู ุตูุช ุฎููู ุญุณุจ ุงูุตุญุฉ
        if(j === item.ans) playLightTone('correct');
        else playLightTone('wrong');
      });
      choicesDiv.appendChild(lbl);
    });
    qdiv.appendChild(choicesDiv);
    quizDiv.appendChild(qdiv);
  });
}

function startTimer(onTimeout){
  clearInterval(timerInterval);
  remainingSeconds = TOTAL_SECONDS;
  const timeSpan = document.getElementById('time');
  function tick(){
    const mm = String(Math.floor(remainingSeconds/60)).padStart(2,'0');
    const ss = String(remainingSeconds%60).padStart(2,'0');
    timeSpan.textContent = mm + ':' + ss;
    if(remainingSeconds <= 0){
      clearInterval(timerInterval);
      onTimeout();
    }
    remainingSeconds--;
  }
  tick();
  timerInterval = setInterval(tick,1000);
}
function stopTimer(){ clearInterval(timerInterval); }

function gradeQuiz(){
  const studentName = document.getElementById('student-name').value || 'ุบูุฑ ูุนุฑูู';
  const studentClass = document.getElementById('student-class').value || '-';
  let correct = 0;
  const detailsDiv = document.getElementById('details');
  detailsDiv.innerHTML = '';
  const answers = [];
  quizData.forEach((item, idx) => {
    const sel = document.querySelector(`input[name="q${idx}"]:checked`);
    const user = sel ? parseInt(sel.value) : null;
    const ok = item.ans;
    answers.push({
      question: item.q,
      chosen: user !== null ? item.choices[user] : null,
      correct: item.choices[ok],
      isCorrect: user === ok
    });
    const row = document.createElement('div');
    row.className = 'key-row';
    if(user === ok){
      correct++;
      row.innerHTML = `<strong>ุงูุณุคุงู ${idx+1}:</strong> <span class="correct">ุตุญูุญ</span> โ ุฅุฌุงุจุชู: ${item.choices[user] || 'ูู ุชุฌุจ'}`;
    } else {
      row.innerHTML = `<strong>ุงูุณุคุงู ${idx+1}:</strong> <span class="wrong">ุฎุงุทุฆ</span> โ ุฅุฌุงุจุชู: ${item.choices[user] || '---'} โ ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ: ${item.choices[ok]}`;
    }
    detailsDiv.appendChild(row);
  });

  document.getElementById('student-info').innerHTML = `<p><strong>ุงูุงุณู:</strong> ${studentName} โ <strong>ุงูุดุนุจุฉ:</strong> ${studentClass}</p>`;
  document.getElementById('score').innerHTML = `<h3>ุงูุฏุฑุฌุฉ: ${correct} / ${quizData.length}</h3>`;
  stopTimer();

  // ุนุฑุถ ุตูุญุฉ ุงููุชูุฌุฉ
  document.getElementById('page-quiz').classList.add('hidden');
  document.getElementById('page-result').classList.remove('hidden');

  // ุชุฌููุฒ ููู ุงูุชูุฒูู (JSON)
  const report = { name: studentName, class: studentClass, score: `${correct}/${quizData.length}`, answers: answers, timeLeft: document.getElementById('time').textContent };
  document.getElementById('download').onclick = function(){
    const blob = new Blob([JSON.stringify(report, null, 2)], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    const safeName = (studentName||'student').replace(/\s+/g,'_');
    a.download = `result_${safeName}.json`;
    a.click();
    URL.revokeObjectURL(url);
  };
}

/* ------------------ ุงูุฑุจุท ุจุงูุฃุฒุฑุงุฑ ------------------ */
document.getElementById('start-btn').addEventListener('click', () => {
  const name = document.getElementById('student-name').value.trim();
  const cls = document.getElementById('student-class').value;
  if(!name || !cls){ alert('ุฑุฌุงุกู ุงูุชุจ ุงูุงุณู ูุงุฎุชุฑ ุงูุดุนุจุฉ ูุจู ุงูุจุฏุก.'); return; }
  // ุฅุธูุงุฑ ุตูุญุฉ ุงูุงุฎุชุจุงุฑ
  document.getElementById('page-student').classList.add('hidden');
  document.getElementById('page-quiz').classList.remove('hidden');
  renderQuiz();
  startTimer(() => {
    alert('ุงูุชูู ุงูููุช. ุณูุชู ุชูููู ุงูุงุฎุชุจุงุฑ ุงูุขู.');
    gradeQuiz();
  });
  // ุชููุฆุฉ ุตูุช ูุจูุฑูุง (ูุชูููู ุชุฃุฎูุฑ ุงูุชุดุบูู ูู ุจุนุถ ุงููุชุตูุญุงุช)
  ensureAudioCtx();
});

document.getElementById('submit').addEventListener('click', () => {
  if(confirm('ูู ุชุฑูุฏ ุชูููู ุงูุงุฎุชุจุงุฑ ุงูุขูุ')) gradeQuiz();
});
document.getElementById('finish-early').addEventListener('click', () => {
  if(confirm('ูู ุชุฑูุฏ ุฅููุงุก ุงูุงุฎุชุจุงุฑ ุงูุขู ูุชูููููุ')) gradeQuiz();
});
document.getElementById('retry').addEventListener('click', () => {
  // ุฅุนุงุฏุฉ ุฅูู ุตูุญุฉ ุงูุจูุงูุงุช ูุชูุธูู ุงูุงุฎุชูุงุฑุงุช
  document.getElementById('page-result').classList.add('hidden');
  document.getElementById('page-student').classList.remove('hidden');
  const inputs = document.querySelectorAll('input[type="radio"]');
  inputs.forEach(i => i.checked = false);
  // ุฅุนุงุฏุฉ ุงููุคูุช
  stopTimer();
});
</script>
</body>
</html>
